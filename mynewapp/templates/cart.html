{% extends 'master.html' %}
{% block title %}Your Cart{% endblock %}

{% block body %}
<div class="container mt-5">
  <h2 class="mb-4 text-center"><i class="bi bi-cart3"></i> Your Cart</h2>

  {% if cart %}
  <table class="table table-bordered text-center align-middle shadow-sm">
    <thead class="table-dark">
      <tr>
        <th>Book Name</th>
        <th>Price (â‚¹)</th>
        <th>Quantity</th>
        <th>Subtotal (â‚¹)</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody>
      {% for key, item in cart.items %}
      <tr>
        <td>{{ item.book_name }}</td>
        <td>{{ item.price }}</td>
        <td>
          <a href="{% url 'update_cart' key 'decrease' %}" class="btn btn-outline-secondary btn-sm">-</a>
          <span class="mx-2 fw-bold">{{ item.quantity }}</span>
          <a href="{% url 'update_cart' key 'increase' %}" class="btn btn-outline-secondary btn-sm">+</a>
        </td>
        <td>{{ item.subtotal }}</td>
        <td>
          <a href="{% url 'remove_from_cart' key %}" class="btn btn-danger btn-sm">Remove</a>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  <div class="text-end mt-3">
    <h4><strong>Total: â‚¹{{ total }}</strong></h4>
    <a href="{% url 'buy_now' %}?book_name=Cart&price={{ total }}" class="btn btn-success btn-lg mt-2">
      Proceed to Buy
    </a>
  </div>

  {% else %}
  <div class="alert alert-warning text-center mt-5">Your cart is empty ðŸ›’</div>
  {% endif %}
</div>
{% endblock %}